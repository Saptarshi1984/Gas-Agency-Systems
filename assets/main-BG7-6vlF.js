import{g as B,a as h,G as r,s as v,b as f,d as i,c as g,e as c,f as L,h as k,i as D,j as w}from"./firebase-DJ51gAwz.js";document.getElementById("btnSignup").addEventListener("click",()=>{document.getElementById("signUpForm").style.display="flex",document.getElementById("signInForm").style.display="none"});document.getElementById("btnSignin").addEventListener("click",()=>{document.getElementById("signUpForm").style.display="none",document.getElementById("signInForm").style.display="flex"});document.getElementById("btnAdminLogin").addEventListener("click",()=>{document.getElementById("signInForm").style.display="none",document.getElementById("adminLogin").style.display="flex"});document.getElementById("userLogin").addEventListener("click",()=>{document.getElementById("adminLogin").style.display="none",document.getElementById("signInForm").style.display="flex"});const d=B(),A=h(),b=new r,F=document.getElementById("userEmail"),P=document.getElementById("userPassword"),R=document.getElementById("btnLogin"),_=document.getElementById("btnCreate"),y=document.getElementById("newName"),m=document.getElementById("newEmail"),E=document.getElementById("newPassword"),x=document.getElementById("status");R.addEventListener("click",()=>{const s=F.value,n=P.value;v(w,s,n).then(e=>{e.user,window.location.href="/GasAgency/dashboard.html"}).catch(e=>{console.error(e),alert("you are in login error")})});document.getElementById("googleLogin").addEventListener("click",async s=>{var n;s.preventDefault();try{const e=await f(A,b),l=r.credentialFromResult(e).accessToken,a=e.user,o=i(d,"users",a.uid),u=i(d,"Bookings",a.uid),I=await g(o),p=await g(u);I.exists()||await c(o,{name:a.displayName,email:a.email}),p.exists()||await c(u,{CylCount:12,RegDate:new Date}),window.location.href="/GasAgency/dashboard.html"}catch(e){e.code;const t=e.message;(n=e.customData)==null||n.email,r.credentialFromError(e),alert("Login Error! "+t)}});_.addEventListener("click",async()=>{const s=m.value,n=E.value;await L(w,s,n).then(e=>{e.user;try{const t=i(d,"users",e.user.uid),l=i(d,"Bookings",e.user.uid);c(t,{name:y.value,email:m.value}),c(l,{CylCount:12,RegDate:new Date}),x.innerHTML="Account Created Successfully.",y.value="",m.value="",E.value="",confirmPwd.value=""}catch(t){console.error("Error adding document: ",t)}}).catch(e=>{e.code;const t=e.message;alert(t)})});document.getElementById("adminLog").addEventListener("click",async s=>{s.preventDefault();const n=document.getElementById("adminEmail").value,e=document.getElementById("adminPwd").value,a=(await k(D(d,"admin"))).docs.map(o=>o.data()).find(o=>o.email===n&&o.password===e);a?(sessionStorage.setItem("AdminEmail",a.email),window.location.href="/GasAgency/admin.html"):alert.error("Invalid Credentials, Please try again")});
