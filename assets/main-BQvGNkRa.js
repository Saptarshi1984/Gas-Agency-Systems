import{g as p,a as B,G as m,s as I,b as f,d as i,c as g,e as d,f as D,h as k,i as A,j as y}from"./firebase-DJ51gAwz.js";const c=p(),L=B(),P=new m,R=document.getElementById("userEmail"),_=document.getElementById("userPassword"),b=document.getElementById("btnLogin"),C=document.getElementById("btnCreate"),w=document.getElementById("newName"),l=document.getElementById("newEmail"),h=document.getElementById("newPassword"),N=document.getElementById("status");b.addEventListener("click",()=>{const a=R.value,n=_.value;I(y,a,n).then(e=>{e.user,window.location.href="/GasAgency/dashboard.html"}).catch(e=>{console.error(e),alert("you are in login error")})});document.getElementById("googleLogin").addEventListener("click",async a=>{var n;a.preventDefault();try{const e=await f(L,P),r=m.credentialFromResult(e).accessToken,s=e.user,o=i(c,"users",s.uid),u=i(c,"Bookings",s.uid),E=await g(o),v=await g(u);E.exists()||await d(o,{name:s.displayName,email:s.email}),v.exists()||await d(u,{CylCount:12,RegDate:new Date}),window.location.href="/GasAgency/dashboard.html"}catch(e){e.code;const t=e.message;(n=e.customData)==null||n.email,m.credentialFromError(e),alert("Login Error! "+t)}});C.addEventListener("click",async()=>{const a=l.value,n=h.value;await D(y,a,n).then(e=>{e.user;try{const t=i(c,"users",e.user.uid),r=i(c,"Bookings",e.user.uid);d(t,{name:w.value,email:l.value}),d(r,{CylCount:12,RegDate:new Date}),N.innerHTML="Account Created Successfully.",w.value="",l.value="",h.value="",confirmPwd.value=""}catch(t){console.error("Error adding document: ",t)}}).catch(e=>{e.code;const t=e.message;alert(t)})});document.getElementById("adminLog").addEventListener("click",async a=>{a.preventDefault();const n=document.getElementById("adminEmail").value,e=document.getElementById("adminPwd").value,s=(await k(A(c,"admin"))).docs.map(o=>o.data()).find(o=>o.email===n&&o.password===e);s?(sessionStorage.setItem("AdminEmail",s.email),window.location.href="/admin.html"):alert.error("Invalid Credentials, Please try again")});
